using Workerd = import "/workerd/workerd.capnp";

const unitTests :Workerd.Config = (
  services = [
    ( name = "js-rpc-test",
      worker = (
        modules = [
          (name = "worker", esModule = embed "js-rpc-test.js")
        ],
        compatibilityDate = "2024-01-01",
        compatibilityFlags = ["js_rpc","nodejs_compat","experimental"],
        bindings = [
          (name = "self", service = "js-rpc-test"),
          (name = "MyService", service = (name = "js-rpc-test", entrypoint = "MyService")),
          (name = "MyActor", durableObjectNamespace = "MyActor"),
          (name = "twelve", json = "12"),
        ],

        durableObjectNamespaces = [
          (className = "MyActor", uniqueKey = "foo"),
        ],

        durableObjectStorage = (inMemory = void),
      )
    ),
  ],
);
